#!/usr/bin/env ruby

$LOAD_PATH.unshift File.join(File.dirname(__FILE__), '..', 'lib')
require 'ruby_chopped'
require 'fileutils'

if "new" == ARGV.shift && ARGV.first
  folder = ARGV.shift
  
  puts "Creating #{folder} basket..."
  
  FileUtils.mkdir_p(File.join(folder, "lib"))
  FileUtils.touch(File.join(folder, "lib", "#{folder}.rb"))
  File.open("#{folder}/Gemfile", "wb+") do |f|
    f << RubyChopped.gemfile_string
  end
  
  puts ""
  puts "Your basket is ready. Open the Gemfile to see what you'll be working with today."

  puts ""
  puts "You'll want to cd into #{folder} and run 'bundle install' first"
  puts "Enjoy!"
else
  puts "Unknown Action. Please use 'ruby_chopped new my_new_basket'"
end

exit!